<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Google Drive Images</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background: #f5f5f5;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
      }
      h1 {
        color: #333;
      }
      .test-section {
        margin: 20px 0;
        padding: 20px;
        background: #f9f9f9;
        border-radius: 4px;
      }
      .image-test {
        display: inline-block;
        margin: 10px;
        text-align: center;
      }
      .image-test img {
        max-width: 200px;
        max-height: 200px;
        border: 2px solid #ddd;
        border-radius: 4px;
      }
      .image-test.success img {
        border-color: #4caf50;
      }
      .image-test.error img {
        border-color: #f44336;
      }
      .status {
        margin-top: 5px;
        font-size: 12px;
      }
      .status.success {
        color: #4caf50;
      }
      .status.error {
        color: #f44336;
      }
      .summary {
        padding: 15px;
        background: #e3f2fd;
        border-left: 4px solid #2196f3;
        margin: 20px 0;
      }
      .instruction {
        padding: 15px;
        background: #fff3cd;
        border-left: 4px solid #ffc107;
        margin: 20px 0;
      }
      code {
        background: #f5f5f5;
        padding: 2px 6px;
        border-radius: 3px;
        font-family: monospace;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üß™ Test Google Drive Images Loading</h1>

      <div class="instruction">
        <h3>‚ö†Ô∏è H∆∞·ªõng d·∫´n:</h3>
        <ol>
          <li>Trang n√†y s·∫Ω test 5 ·∫£nh ƒë·∫ßu ti√™n t·ª´ Google Drive</li>
          <li>N·∫øu ·∫£nh KH√îNG hi·ªÉn th·ªã ‚Üí File ch∆∞a ƒë∆∞·ª£c share c√¥ng khai</li>
          <li>
            ƒê·ªçc file <code>CHECK_IMAGES.md</code> ƒë·ªÉ bi·∫øt c√°ch share files
          </li>
        </ol>
      </div>

      <div class="summary" id="summary">
        <h3>üìä K·∫øt qu·∫£:</h3>
        <p>ƒêang load... ‚è≥</p>
      </div>

      <div class="test-section">
        <h2>Test Images (5 ·∫£nh ƒë·∫ßu)</h2>
        <div id="images-container"></div>
      </div>
    </div>

    <script>
      const testImages = [
        { id: "1Zi0xWmop7qroAaf0ztGU1kJvXfK6xY9f", name: "Nh√† ƒêinh 1" },
        { id: "1fElBR9_pKSmE5xqGFfhstnWFKcF9TEgy", name: "Nh√† ƒêinh 2" },
        { id: "1y7XAAesvOQ_yLJnPJgzE6iErELhzS6yE", name: "Nh√† ƒêinh 3" },
        { id: "1rwJZHsCXPW3ZgI6G11eCf9FlIjijGALf", name: "Nh√† ƒêinh 4" },
        { id: "1uqp5LA-E3rCc6l-yFDAR-lPNWawGYZoq", name: "Nh√† Ti·ªÅn L√™ 1" },
      ];

      let successCount = 0;
      let errorCount = 0;
      let totalCount = testImages.length;

      const container = document.getElementById("images-container");
      const summary = document.getElementById("summary");

      function updateSummary() {
        const loadedCount = successCount + errorCount;
        if (loadedCount === totalCount) {
          const percentage = Math.round((successCount / totalCount) * 100);
          summary.innerHTML = `
                    <h3>üìä K·∫øt qu·∫£:</h3>
                    <p>‚úÖ Th√†nh c√¥ng: <strong>${successCount}/${totalCount}</strong> (${percentage}%)</p>
                    <p>‚ùå Th·∫•t b·∫°i: <strong>${errorCount}/${totalCount}</strong></p>
                    ${
                      errorCount > 0
                        ? '<p style="color: #f44336;">‚ö†Ô∏è <strong>M·ªôt s·ªë files ch∆∞a ƒë∆∞·ª£c share c√¥ng khai!</strong> ƒê·ªçc CHECK_IMAGES.md ƒë·ªÉ bi·∫øt c√°ch fix.</p>'
                        : '<p style="color: #4CAF50;">üéâ <strong>T·∫•t c·∫£ ·∫£nh ƒë·ªÅu OK!</strong></p>'
                    }
                `;
        }
      }

      testImages.forEach((item, index) => {
        const div = document.createElement("div");
        div.className = "image-test";
        div.id = `test-${index}`;

        const url = `https://drive.google.com/thumbnail?id=${item.id}&sz=w1000`;

        div.innerHTML = `
                <img src="${url}" alt="${item.name}">
                <div class="status">
                    <div>${item.name}</div>
                    <div id="status-${index}">‚è≥ Loading...</div>
                </div>
            `;

        container.appendChild(div);

        const img = div.querySelector("img");

        img.onload = () => {
          successCount++;
          div.classList.add("success");
          document.getElementById(`status-${index}`).innerHTML = "‚úÖ OK";
          document.getElementById(`status-${index}`).classList.add("success");
          updateSummary();
        };

        img.onerror = () => {
          errorCount++;
          div.classList.add("error");
          document.getElementById(`status-${index}`).innerHTML =
            "‚ùå Failed - Ch∆∞a public";
          document.getElementById(`status-${index}`).classList.add("error");
          updateSummary();
        };
      });

      // Add link to original files
      setTimeout(() => {
        const linksDiv = document.createElement("div");
        linksDiv.className = "test-section";
        linksDiv.innerHTML = `
                <h3>üîó Links ƒë·ªÉ test th·ªß c√¥ng:</h3>
                ${testImages
                  .map(
                    (item) => `
                    <p>
                        <strong>${item.name}:</strong><br>
                        <a href="https://drive.google.com/file/d/${item.id}/view" target="_blank">
                            https://drive.google.com/file/d/${item.id}/view
                        </a>
                    </p>
                `
                  )
                  .join("")}
            `;
        document.querySelector(".container").appendChild(linksDiv);
      }, 1000);
    </script>
  </body>
</html>
